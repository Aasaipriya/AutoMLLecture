\documentclass{exam}
\usepackage{amsmath, amsfonts}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage[super]{nth}

\DeclareMathOperator*{\argmin}{argmin}

\usepackage[hyperfootnotes=false]{hyperref}

\usepackage[usenames,dvipsnames]{color}
\newcommand{\note}[1]{
	\noindent~\\
	\vspace{0.25cm}
	\fcolorbox{Red}{Orange}{\parbox{0.99\textwidth}{#1\\}}
	%{\parbox{0.99\textwidth}{#1\\}}
	\vspace{0.25cm}
}


\input{macros}
%\renewcommand{\hide}[1]{#1}

\qformat{\thequestion. \textbf{\thequestiontitle}\hfill[\thepoints]}
\bonusqformat{\thequestion. \textbf{\thequestiontitle}\hfill[\thepoints]}

\pagestyle{headandfoot}

%%%%%% MODIFY FOR EACH SHEET!!!! %%%%%%
\newcommand{\duedate}{02.12.18 (14:00)}
\newcommand{\due}{{\bf This assignment is due on \duedate.} }
\firstpageheader
{Due: \duedate \\ Points: 15}
{{\bf\lecture}\\ \assignment{7}}
{\lectors\\ \semester}

\runningheader
{Due: \duedate}
{\assignment{7}}
{\semester}
%%%%%% MODIFY FOR EACH SHEET!!!! %%%%%%

\firstpagefooter
{}
{\thepage}
{}

\runningfooter
{}
{\thepage}
{}

\headrule
\pointsinrightmargin
\bracketedpoints
\marginpointname{pt.}


\begin{document}
Based on the lecture, in this exercise you will use a state-of-the-art algorithm, BOHB to tune hyperparameters of a neural network. Further information about this optimization strategy can be found

\begin{description}
\item[the code repository:] \url{https://github.com/automl/HpBandSter/}
\item[the paper:] \url{http://proceedings.mlr.press/v80/falkner18a.html}
\item[a blog post:] \url{https://www.automl.org/blog_bohb/}
\end{description}

As a simple, but yet efficient implementation of a neural network, you will use the \emph{MLPClassifier}\footnote{\url{https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPClassifier.html}} as implemented in \emph{scikit-learn}. You will train this network to perform handwritten digit recognition using the \emph{digits}\footnote{\url{http://archive.ics.uci.edu/ml/datasets/Pen-Based+Recognition+of+Handwritten+Digits}} dataset. This exercise depends on the following Python packages, which need to be installed in your environment:
\begin{itemize}
\item BOHB \url{https://github.com/automl/HpBandSter}
\end{itemize}

\begin{questions}
	\titledquestion{Architecture Search}[15]
	We provide you with a template that already runs BOHB, loads the dataset, but does not yet optimize hyperparameters of the MLP.
	
	\begin{parts} 
	\part[3] Make yourself familiar with BOHB. Explain in maximal three sentences what \emph{eta}, \emph{min\_budget}, and \emph{max\_budget} does.
	
	\part[2] Complete \verb|MLPWorker| such that for every function evaluation the network is only trained for the amount of iterations specified in \verb|budget| and returns a meaningful metric to be minimized by BOHB.
	
	\part[5] Add at least 5 more hyperparameters of the network to be tuned by BOHB.
	
	\part[2] Run BOHB multiple times with different values for \emph{eta}, \emph{min\_budget}, and \emph{max\_budget} (see tips to speed up computation) and obtain the best found configuration. Is the found configuration and its performance the same across multiple runs with the same values? Why or why not? What is the highest performance you found?
	
	\part[1] BOHB saves results in the folder \verb|./example_mlp_on_digits/|. Load and visualize the results as shown here: \url{https://automl.github.io/HpBandSter/build/html/auto_examples/plot_example_6_analysis.html}
	
	\part[1] Have a look at the \verb|losses\_over\_time| plot. Was the best loss always observed with the highest budget? Think of an example where this is not the case.
	
	\part[1] Have a look at the \verb|correlation\_across\_budgets| which shows the correlation $\rho_{spearman}$\footnote{See also \url{https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.stats.spearmanr.html}} between the budgets. What does it mean if the correlation is low?
	
	\end{parts}
\end{questions}

Useful tips:
\begin{itemize}
\item By default the script uses only one worker, you can increase the number of workers at the cost of using more CPU cores.
\item By default the script runs only a small number of BOHB iterations. To evaluate more configurations and obtain better results, increase this value
\end{itemize}

\noindent
\due Submit your solution for the tasks by uploading a PDF to your groups BitBucket repository. The PDF has to include the name of the submitter(s). Teams of at most $2$ students are allowed.
\end{document}